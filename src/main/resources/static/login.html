<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>로그인</title>
</head>
<body>

<h1>로그인</h1>

<input id="email" type="email" placeholder="이메일"><br>
<input id="password" type="password" placeholder="비밀번호"><br>

<button onclick="login()">로그인</button>

<p id="msg"></p>

<script>
  function login() {
    fetch(`/api/users/login`, {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({
        email: document.getElementById('email').value,
        password: document.getElementById('password').value
      })
    }).then(res => {
      if (!res.ok) {
        throw new Error('로그인 실패');
      }
      return res.json();
    }).then(user => {
      document.getElementById('msg').innerText =
              `환영합니다 ${user.nickname}`;
      // TODO: userId 저장 (localStorage/sessionStorage)
    }).catch(err => {
      document.getElementById('msg').innerText = err.message;
    });
  }
</script>

</body>
</html>
